<!DOCTYPE html>
<html xmlns:layout="http://www.w3.org/1999/xhtml" xmlns:th="http://www.w3.org/1999/xhtml"
	layout:decorate="~{layout}">
<head>
<meta charset="UTF-8" />
</head>
<body>

	<section class="layout-content" layout:fragment="corpo">
		<main role="main">

		<section class="jumbotron text-center">
			<img class="d-block mx-auto" th:src="@{/image/spring-security.png}"
				width="72" height="72">
			<div class="container">
				<h1 class="jumbotron-heading">Clínica Spring Security</h1>
				<p class="lead text-muted">Nosso central de atendimentos</p>
			</div>
		</section>

		<div class="album py-5 bg-light">
			<div class="container"> 
				<div class="row">
				
				<div class="col-md-6">
					<div id="chartContainer" style="height: 250px; width: 60%; margin-top: 5%;"></div>
 			<script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
				</div>
					<div class="col-md-6">

						<h2>Usuários Cadastrados</h2>

						<table id="table-usuarios"
							class="table table-sm table-striped table-bordered nowrap"
							style="width: 100%">
							<thead class="thead-dark">
								<tr>
									<th scope="col">#</th>
									<th scope="col">Nome de Usuário (email)</th>
									<th scope="col">Cadastro Ativo</th>
									<th scope="col">Perfis</th>
									<th scope="col">Credenciais</th>
									<th scope="col">Dados Pessoais</th>
									<th scope="col">Excluir</th>
								</tr>
							</thead>
						</table>
					</div>
					
					<div class="col-md-6">
					<h2>Lista de Especialidades</h2>
						
						<table id="table-especializacao" class="table table-sm table-striped table-bordered nowrap" style="width:100%">
						  <thead class="thead-dark">
						    <tr>
						      <th scope="col">#</th>
						      <th scope="col">Especialidade</th>
						      <th scope="col">Editar</th>
						      <th scope="col">Excluir</th>
						    </tr>
						  </thead>
						</table>
				</div>		
				</div>
			</div>			
		</div>
		
		<script th:inline="javascript">
/*<![CDATA[*/
window.onload = function() {
    var grafico = /*[[${grafico}]]*/ 'default';
    
    //  Only a test
    grafico.forEach(myFunction);
    function myFunction(value, index, array) {
    	console.log(value); 
    }    
    
    var chart = new CanvasJS.Chart("chartContainer", {
    	animationEnabled: true,
    	title: {
    		text: "Quantidade de Usuarios"
    	},
    	ajax:{
    		url:'/dashborad/'+ grafico,
    		data:'data'
    	},
    	data: [{        
    		type: "pie",
    		startAngle: 240,
    		yValueFormatString: "##0.00\"\"",
    		indexLabel: "{label} {y}",     
    		dataPoints: []
    	}]
    });

    chart.options.data[0].dataPoints = grafico;	
    chart.render();		   	
}

    	
/*]]>*/

</script>
		
		
	</main>
	</section>
	<script	th:src="@{/js/usuario.js(v=${version})}" th:fragment="js"></script>
	<script th:src="@{/js/especialidade.js?(v=${version})}" th:fragment="js"></script>
	<script th:inline="javascript" th:fragment="inlinescript"></script>
	<script th:src="@{/webjars/jquery/jquery.min.js(v=${version}) }"></script>
	<script	src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
	<script th:src="@{/webjars/bootstrap/js/bootstrap.min.js(v=${version}) }"></script>
</body>
</html>